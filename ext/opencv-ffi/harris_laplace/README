Assembled from  Delia Passalacqua's patches, described here:

http://code.opencv.org/issues/1628
https://code.ros.org/trac/opencv/ticket/1053
https://code.ros.org/trac/opencv/ticket/879
https://code.ros.org/trac/opencv/ticket/820

Code was rearranged a bit to make it standalone rather than the original
patch into OpenCV.  *-detritus files are remains of patches that were
discarded (unused) in the effort of making the code standalone.
